mapboxgl.accessToken="pk.eyJ1IjoidGhvbWFzMzMiLCJhIjoiY2pzYWFpcXNwMDAxbzN5cGZneGxia3U3ZCJ9.sigYT2nlLnC1siycJ3im-Q";var map=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/basic-v9",center:[4.85,45.75],zoom:15}),urlAPI="http://localhost/projet/velocity/api";function formSubmitPopup(e){e.preventDefault(),$.ajax({type:"POST",url:`${urlAPI}/index.php`,data:"test",success:function(e){console.log(e)}})}$.ajax({type:"GET",dataType:"JSON",url:"https://api.jcdecaux.com/vls/v1/stations?contract=Lyon&apiKey=16613431a6af103df05b4f8ff767c26f87858ec8",success:function(e){console.log(e),e.forEach(function(e){var o=document.createElement("div");o.id="marker",console.log(o.id);var s=new mapboxgl.Popup({offset:25}).setHTML(`\n                <strong>${e.name}</strong></br>\n                <p class="text-uppercase">VÃ©los disponibles</p></br>\n                <h3>${e.available_bikes} / ${e.bike_stands}</h3>\n                </br><span class="text-warning">${e.status}</span>\n                <form onSubmit="formSubmitPopup(event)">\n                    <input type="submit" class="btn btn-sm btn-success value="RESERVER">\n                </form>`);new mapboxgl.Marker(o).setLngLat(e.position).setPopup(s).addTo(map)})},error:function(e){console.error()}}),$("#formLogin").on("submit",function(){event.preventDefault();const e=$(this).serialize();console.log(e),$.ajax({type:"POST",url:`${urlAPI}/checkUser.php`,data:e,success:function(e){if(console.log(e),e=JSON.parse(e),console.log(e),e.username){$("#formLogin").hide(),$("#map").show();var o=$("#map"),s=$(".mapboxgl-canvas");o.css("width","100%"),s.css("width","100%"),map.resize()}}})});